/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/summernote@0.8.18/src/js/base/module/LinkPopover.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import $ from"jquery";import lists from"../core/lists";import dom from"../core/dom";export default class LinkPopover{constructor(o){this.context=o,this.ui=$.summernote.ui,this.options=o.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":()=>{this.update()},"summernote.disable summernote.dialog.shown summernote.blur":()=>{this.hide()}}}shouldInitialize(){return!lists.isEmpty(this.options.popover.link)}initialize(){this.$popover=this.ui.popover({className:"note-link-popover",callback:o=>{o.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);const o=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",o,this.options.popover.link),this.$popover.on("mousedown",o=>{o.preventDefault()})}destroy(){this.$popover.remove()}update(){if(!this.context.invoke("editor.hasFocus"))return void this.hide();const o=this.context.invoke("editor.getLastRange");if(o.isCollapsed()&&o.isOnAnchor()){const t=dom.ancestor(o.sc,dom.isAnchor),e=$(t).attr("href");this.$popover.find("a").attr("href",e).text(e);const s=dom.posFromPlaceholder(t),i=$(this.options.container).offset();s.top-=i.top,s.left-=i.left,this.$popover.css({display:"block",left:s.left,top:s.top})}else this.hide()}hide(){this.$popover.hide()}}
//# sourceMappingURL=/sm/375fd92505dd9631a4f23fc70703154d3b37e1524666aefaee5d249ad0e4cea1.map